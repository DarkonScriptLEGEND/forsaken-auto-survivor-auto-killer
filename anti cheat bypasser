--// Services
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Debris = game:GetService("Debris")
local SoundService = game:GetService("SoundService")
local LocalPlayer = Players.LocalPlayer

--// Remove anti-cheat scripts
for _, v in ipairs(game:GetDescendants()) do
	if v:IsA("Script") or v:IsA("LocalScript") then
		local name = v.Name:lower()
		if name:find("anti") or name:find("cheat") or name:find("hack") or name:find("kick") or name:find("generatorhack") or name:find("fly") or name:find("speed") then
			pcall(function() v:Destroy() end)
		end
	end
end

--// Notify success
game.StarterGui:SetCore("SendNotification", {
	Title = "Behind Ya âœ…",
	Text = "Successfully executed script!\nVersion 1.0",
	Duration = 4
})

--// Core Variables
local active = false
local cooldown = false

--// Sound Effect
local function playSound(id)
	local s = Instance.new("Sound", SoundService)
	s.SoundId = "rbxassetid://"..id
	s.Volume = 1
	s:Play()
	Debris:AddItem(s, 4)
end

--// Floating Text
local function floatText(txt, color, duration)
	local billboard = Instance.new("BillboardGui", LocalPlayer.Character)
	billboard.Size = UDim2.new(0, 200, 0, 50)
	billboard.StudsOffset = Vector3.new(0, 4, 0)
	billboard.AlwaysOnTop = true
	billboard.Adornee = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")

	local label = Instance.new("TextLabel", billboard)
	label.Size = UDim2.new(1, 0, 1, 0)
	label.BackgroundTransparency = 1
	label.Text = txt
	label.TextColor3 = color
	label.TextScaled = true

	Debris:AddItem(billboard, duration)
end

--// Teleport Behind
local function getNearest(radius)
	local closest, dist = nil, radius
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local mag = (plr.Character.HumanoidRootPart.Position - LocalPlayer.Character.HumanoidRootPart.Position).Magnitude
			if mag < dist then
				closest = plr
				dist = mag
			end
		end
	end
	return closest
end

local function teleportToBehind(target)
	local root = target.Character:FindFirstChild("HumanoidRootPart")
	if not root then return end
	local offset = -root.CFrame.LookVector * 12.5 + Vector3.new(0, 3.5, 0)
	local behindPos = root.Position + offset
	local myRoot = LocalPlayer.Character:FindFirstChild("HumanoidRootPart")
	if myRoot then
		playSound("9118823102")
		myRoot.CFrame = CFrame.new(behindPos)
		floatText("Behind Ya!", Color3.new(1, 1, 0), 1.5)
	end
end

--// UI Setup
local gui = Instance.new("ScreenGui", game.CoreGui)
gui.Name = "BehindYa_UI"
gui.ResetOnSpawn = false

local mainBtn = Instance.new("TextButton", gui)
mainBtn.Size = UDim2.new(0, 160, 0, 30)
mainBtn.Position = UDim2.new(0, 10, 0, 10)
mainBtn.Text = "Behind Ya: OFF"
mainBtn.BackgroundColor3 = Color3.fromRGB(0, 0, 255)
mainBtn.TextColor3 = Color3.new(1, 1, 1)

local showLogBtn = Instance.new("TextButton", gui)
showLogBtn.Size = UDim2.new(0, 100, 0, 25)
showLogBtn.Position = UDim2.new(0, 180, 0, 10)
showLogBtn.Text = "Show Log"
showLogBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
showLogBtn.TextColor3 = Color3.new(1, 1, 1)
showLogBtn.Active = true
showLogBtn.Draggable = true

local logFrame = Instance.new("Frame", gui)
logFrame.Size = UDim2.new(0, 200, 0, 200)
logFrame.Position = UDim2.new(0, 180, 0, 40)
logFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 30)
logFrame.Visible = false

local scroll = Instance.new("ScrollingFrame", logFrame)
scroll.Size = UDim2.new(1, 0, 1, 0)
scroll.CanvasSize = UDim2.new(0, 0, 0, 500)
scroll.ScrollBarThickness = 8
scroll.BackgroundTransparency = 1

local function updateLog()
	scroll:ClearAllChildren()
	local y = 0
	for _, plr in pairs(Players:GetPlayers()) do
		local lbl = Instance.new("TextLabel", scroll)
		lbl.Size = UDim2.new(1, -10, 0, 20)
		lbl.Position = UDim2.new(0, 5, 0, y)
		lbl.BackgroundTransparency = 1
		lbl.TextColor3 = Color3.new(1, 1, 1)
		lbl.Text = "- " .. plr.Name
		lbl.TextScaled = true
		lbl.TextXAlignment = Enum.TextXAlignment.Left
		y += 22
	end
	scroll.CanvasSize = UDim2.new(0, 0, 0, y)
end

showLogBtn.MouseButton1Click:Connect(function()
	logFrame.Visible = not logFrame.Visible
	updateLog()
end)

mainBtn.MouseButton1Click:Connect(function()
	active = not active
	mainBtn.Text = active and "Behind Ya: ON" or "Behind Ya: OFF"
	mainBtn.BackgroundColor3 = active and Color3.fromRGB(255, 255, 0) or Color3.fromRGB(0, 0, 255)
end)

--// Execution
RunService.Heartbeat:Connect(function()
	if active and not cooldown then
		local target = getNearest(85)
		if target then
			teleportToBehind(target)
			cooldown = true
			task.wait(2.3)
			cooldown = false
		end
	end
end)
