--// Forsaken AI Script: Auto Survivor + Killer with AI behavior for Noob, Elliot, and Shedletsky

local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local Workspace = game:GetService("Workspace")
local LocalPlayer = Players.LocalPlayer
local Character = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
local Humanoid = Character:WaitForChild("Humanoid")

local function notify(txt)
	game.StarterGui:SetCore("ChatMakeSystemMessage", {
		Text = "[Forsaken AI] " .. txt,
		Color = Color3.fromRGB(0,255,0),
		Font = Enum.Font.GothamBold,
		FontSize = Enum.FontSize.Size24
	})
end

local function getNearestPlayer(maxDist)
	local closest, dist = nil, maxDist or 1000
	for _, plr in pairs(Players:GetPlayers()) do
		if plr ~= LocalPlayer and plr.Character and plr.Character:FindFirstChild("HumanoidRootPart") then
			local magnitude = (plr.Character.HumanoidRootPart.Position - Character.HumanoidRootPart.Position).Magnitude
			if magnitude < dist then
				closest = plr
				dist = magnitude
			end
		end
	end
	return closest, dist
end

local function dodge()
	local direction = Vector3.new(math.random(-1,1),0,math.random(-1,1)).Unit * 15
	Character:MoveTo(Character.HumanoidRootPart.Position + direction)
end

local function autoRunAway(killer)
	if killer and killer.Character and killer.Character:FindFirstChild("HumanoidRootPart") then
		local direction = (Character.HumanoidRootPart.Position - killer.Character.HumanoidRootPart.Position).Unit
		Character:MoveTo(Character.HumanoidRootPart.Position + direction * 25)
	end
end

local function autoAbility()
	local tool = Character:FindFirstChildOfClass("Tool")
	if tool then
		tool:Activate()
	end
end

local function deleteAntiCheat()
	for _, obj in pairs(Workspace:GetDescendants()) do
		if obj:IsA("Script") or obj:IsA("LocalScript") then
			local name = obj.Name:lower()
			if name:find("anti") or name:find("cheat") or name:find("cheater") then
				pcall(function()
					obj:Destroy()
				end)
			end
		end
	end
end

deleteAntiCheat()

-- Determine role
local role = "Survivor"
for _, tool in pairs(Character:GetChildren()) do
	if tool:IsA("Tool") and tool.Name:lower():find("weapon") then
		role = "Killer"
	end
end

notify("Role detected: " .. role)

local survivorType = "Noob"
if Character.Name:lower():find("elliot") then
	survivorType = "Elliot"
elseif Character.Name:lower():find("shedletsky") then
	survivorType = "Shedletsky"
end

-- Survivor AI
if role == "Survivor" then
	notify("Auto Survivor Activated [" .. survivorType .. "]")
	RunService.RenderStepped:Connect(function()
		local killer, dist = getNearestPlayer(85)
		if killer then
			autoRunAway(killer)
			if dist < 30 then
				dodge()
			end
			if survivorType == "Elliot" and math.random() < 0.03 then
				autoAbility()
			elseif survivorType == "Shedletsky" and math.random() < 0.07 then
				autoAbility()
			end
		end
	end)
end

-- Killer AI (basic version)
if role == "Killer" then
	notify("Auto Killer Activated")
	RunService.RenderStepped:Connect(function()
		local target, _ = getNearestPlayer(80)
		if target and target.Character and target.Character:FindFirstChild("HumanoidRootPart") then
			Character:MoveTo(target.Character.HumanoidRootPart.Position)
			autoAbility()
		end
	end)
end
